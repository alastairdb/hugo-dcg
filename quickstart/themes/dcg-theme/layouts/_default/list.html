{{ define "main" }}
  <article class="pa3 pa4-l nested-copy-line-height">
    <section class="cf pv3 pv4-l f4 lh-copy nested-links mid-gray">
      {{- .Content -}}
    </section>
    <section class="mt4" id="posts-container">
      {{ range .Paginator.Pages }}
        <div class="mb4 pb3 bb b--light-gray post-item"{{ if and .Date (not .Date.IsZero) }} data-year="{{ .Date.Year }}" data-month="{{ .Date.Format "2006-01" }}"{{ end }}>
          {{ .Render "summary" }}
        </div>
      {{ end }}
      <div id="no-posts-message" class="f4 gray tc dn">
        {{ i18n "no_posts_found" | default "Keine Beiträge für diesen Zeitraum gefunden." }}
      </div>
    </section>
    {{- template "_internal/pagination.html" . -}}
  </article>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const urlParams = new URLSearchParams(window.location.search);
      const yearFilter = urlParams.get('year');
      const monthFilter = urlParams.get('month');
      
      if (yearFilter || monthFilter) {
        const posts = document.querySelectorAll('.post-item');
        const noPostsMessage = document.getElementById('no-posts-message');
        let visibleCount = 0;
        
        posts.forEach(function(post) {
          let shouldShow = true;
          
          if (yearFilter && post.dataset.year !== yearFilter) {
            shouldShow = false;
          }
          
          if (monthFilter && post.dataset.month !== monthFilter) {
            shouldShow = false;
          }
          
          if (shouldShow) {
            post.style.display = 'block';
            visibleCount++;
          } else {
            post.style.display = 'none';
          }
        });
        
        if (visibleCount === 0) {
          noPostsMessage.classList.remove('dn');
        } else {
          noPostsMessage.classList.add('dn');
        }
      }
    });
  </script>
{{ end }}
