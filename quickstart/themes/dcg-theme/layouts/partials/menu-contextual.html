{{/*
  Use Hugo's native Table of contents feature. You must set `toc: true` in your parameters for this to show.
  https://gohugo.io/content-management/toc/
*/}}

{{- if .Params.toc -}}
  <div class="bg-white pa3 mb4 ba b--light-gray">
    <h3 class="f4 fw6 mb3 {{ $.Param "text_color" | default "mid-gray" }}">{{ i18n "whatsInThis" | default "Inhalt" }}</h3>
    <div class="nested-list-reset nested-copy-line-height nested-links">
      {{ .TableOfContents }}
    </div>
  </div>
{{- end -}}

{{/*
  Use Hugo's native related content feature to pull in content that may have similar parameters, like tags. etc.
  https://gohugo.io/content-management/related/
*/}}

{{ $related := .Site.RegularPages.Related . | collections.First 5 }}

{{ with $related }}
  <div class="bg-white pa3 mb4 ba b--light-gray">
    <h3 class="f4 fw6 mb3 {{ $.Param "text_color" | default "mid-gray" }}">{{ i18n "related" | default "Ähnliche Beiträge" }}</h3>
    <ul class="pa0 list pl0">
	   {{ range . }}
	     <li class="mb2">
          <a href="{{ .RelPermalink }}" class="link dim">
            {{- .Title -}}
          </a>
        </li>
	    {{ end }}
    </ul>
  </div>
{{ end }}
